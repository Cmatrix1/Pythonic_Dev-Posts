


**🔍 نگاهی عمیق‌تر به ولیدیشن (Validation) در توسعه نرم‌افزار**

ولیدیشن به زبان ساده به معنی اعتبارسنجی داده‌های ورودی سیستم قبل از اجرای عملیات داخل سیستم هست.



🔑 **انواع Validation**

1. **Syntax Validation**  
ساده‌ترین نوع ولیدیشن سینتکس ولیدیشن بررسی می‌کنه که آیا ساختار دیتای ورودی صحت داره یا نه. مثلاً:

```json
{
  "order_id": 123,
  "sku": "ABC-123",
  "quantity": 5
}
```

اینجا سینتکس ولیدیشن بررسی می‌کنه که:  
- order_id باید **عدد** باشد.  
- sku باید **رشته** باشد.  
- quantity باید یک عدد **غیرمنفی** باشد.

✅ نکته مهم اینکه این نوع ولیدیشن باید در لایه‌های اولیه مثل **کنترلرهای** سیستم شما انجام بشه تا از ورود دیتای اشتباه به **لاجیک** جلوگیری بشه.



2. **Semantic Validation**  
ولیدیشن معنایی به مفهوم دیتای مرتبط هست. گاهی اوقات حتی اگر سینتکس دیتا درست باشه، ممکن است هنوز در زمینه تجاری منطقی نباشه.

مثلاً اگر شما لاجیکی برای تخصیص موجودی داشته باشید:

```python
allocate("SKU-001", quantity=10)
```

اینجا سیستم باید بررسی کنه که:  
- آیا SKU-001 وجود داره؟  
- آیا به اندازه کافی موجودی برای تخصیص ۱۰ واحد وجود داره؟

✅ اینجا حتی اگر سینتکس دیتا درست باشه باید در زمینه کسب و کار هم منطقی باشه.



3. **Pragmatic Validation**  
ولیدیشن کاربردی بررسی می‌کنه که آیا این اکشن ممکن هست یا مجاز هست با توجه به وضعیت فعلی سیستم. مثلاً:  
- اگر **انبار تعطیل** باشه نباید سفارشی پردازش بشه.  
- یا اگر یک کد تخفیف منقضی شده باید اعمال اون روی سفارش ناموفق باشه.

یک مثال دیگر:  
شما ممکن است اکشنی مثل:

```python
allocate("SKU-001", quantity=50)
```

داشته باشید. ولیدیشن سینتکس و معنایی درست هستند، اما اگر قانون بیزینس شما بگه "مشتری نمی‌تونه بیش از ۲۰ محصول در یک بار سفارش بده"، این اکشن در ولیدیشن کاربردی ناموفق میشه.


🧠 **Common Validation Patterns**

1. **Declarative Validation**  
فرض کنید یک لیست از قوانین دارید مانند:  
- order_id باید یک **عدد صحیح** باشد.  
- quantity باید **غیرمنفی** باشد.

این قوانین را می‌توان به‌صورت **Declarative** از قبل تعریف کرد. در پایتون، می‌توانید از چیزی مثل **pydantic** برای تعریف ورودی‌های مورد انتظار استفاده کنید.

```python
from pydantic import BaseModel, Field

class Order(BaseModel):
    order_id: int
    sku: str
    quantity: int = Field(ge=0) 
```



2. **Postel’s Law (Tolerant Reader Pattern)**  
این قانون میگه:  
**Be conservative in what you send, but liberal in what you accept.**

یعنی "در آنچه ارسال می‌کنید محافظه‌کار باشید، اما در آنچه دریافت می‌کنید آزاد باشید." یا به عبارت ساده‌تر، سیستم شما باید در پذیرش فیلدهای اضافی یا ناشناخته **انعطاف‌پذیر** باشه.

برای مثال، اگر سیستم شما فقط به `order_id` و `quantity` نیاز دارد، اما این را دریافت کند:

```json
{
  "order_id": 123,
  "quantity": 5,
  "promo_code": "DISCOUNT20"
}
```

می‌تونید فیلد اضافی (`promo_code`) را نادیده بگیرید به جای اینکه کل درخواست را رد کنید. این کار سیستم شما را در برابر تغییرات **انعطاف‌پذیر** می‌کنه.



🏁 **جمع‌بندی**

- **ولیدیشن Syntax** بررسی می‌کنه که آیا قالب داده‌ها **صحیح** هست یا نه.
- **ولیدیشن Semantic** بررسی می‌کنه که داده‌ها در **زمینه بیزینس** شما معنی‌دار هستند.
- **ولیدیشن Pragmatic** بررسی می‌کند که آیا عمل **منطقی** و با توجه به وضعیت فعلی سیستم امکان‌پذیر هست.
- از **ولیدیشن declarative** برای اعمال قوانین استفاده کنید و از **Tolerant Reader Pattern** برای انعطاف‌پذیری بیشتر بهره ببرید.



