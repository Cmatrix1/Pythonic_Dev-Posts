Sure! Here’s the Persian version of the post:

---

**🛠️ درک اعتبارسنجی (Validation) در طراحی نرم‌افزار 🛠️**

سلام برنامه‌نویسان عزیز! 👨‍💻👩‍💻

در این پست، به بررسی عمیق مفهوم **اعتبارسنجی (Validation)** می‌پردازیم که یکی از جنبه‌های حیاتی و در عین حال کمتر درک‌شده در ساخت سیستم‌های نرم‌افزاری پایدار است.

اعتبارسنجی به این معنی است که مطمئن شویم تنها داده‌های **صحیح و معنادار** وارد سیستم می‌شود. اگر به درستی انجام شود، از بروز باگ‌ها جلوگیری کرده و سیستم شما را در برابر خطاهای ورودی کاربران مقاوم می‌کند. بیایید این مفاهیم را با مثال‌های ساده بررسی کنیم. 🌟

---

### 🔍 اعتبارسنجی چیست؟

اعتبارسنجی فرآیند **بررسی ورودی‌ها** برای اطمینان از صحت آنها قبل از اجرای عملیات در سیستم است. این کار تضمین می‌کند که داده‌های نادرست به‌طور تصادفی وارد سیستم نشده و مشکلاتی ایجاد نکنند!

فرض کنید شما یک سیستم **فروشگاه اینترنتی** دارید که سفارش‌ها را پردازش می‌کند. شما باید مطمئن شوید که ورودی‌ها (مثل جزئیات سفارش) **معتبر** هستند قبل از اینکه سفارش را پردازش کنید. به عنوان مثال، نمی‌خواهیم سفارشی با تعداد منفی یا کد محصول نامعتبر داشته باشیم!

---

### 🔑 انواع اعتبارسنجی

#### ۱. **اعتبارسنجی ساختاری (Syntax Validation)**

این ساده‌ترین نوع اعتبارسنجی است. این نوع بررسی می‌کند که آیا **ساختار** داده‌های ورودی صحیح است.

به عنوان مثال، اگر ما سفارشی به صورت JSON دریافت کنیم:
```json
{
  "order_id": 123,
  "sku": "ABC-123",
  "quantity": 5
}
```
اعتبارسنجی ساختاری بررسی می‌کند که:
- `order_id` باید **عدد** باشد.
- `sku` باید **رشته** باشد.
- `quantity` باید یک عدد **غیرمنفی** باشد.

اگر ورودی به این شکل باشد:
```json
{
  "order_id": "abc",
  "sku": 123,
  "quantity": -5
}
```
سیستم آن را رد می‌کند زیرا **نوع داده‌ها** اشتباه است و **مقدار منفی** برای تعداد منطقی نیست!

✅ **نکته:** اعتبارسنجی ساختاری باید در **مرزهای سیستم** شما (مثل نقاط ورود API) انجام شود تا از ورود داده‌های نادرست به منطق اصلی سیستم جلوگیری شود.

---

#### ۲. **اعتبارسنجی معنایی (Semantic Validation)**

اعتبارسنجی معنایی به **مفهوم** داده‌ها مربوط است. حتی اگر قالب داده‌ها درست باشد، ممکن است هنوز در زمینه تجاری منطقی نباشد.

برای مثال، اگر شما فرمانی برای **تخصیص موجودی** داشته باشید:
```python
allocate("SKU-001", quantity=10)
```
سیستم باید بررسی کند:
- آیا **SKU-001** وجود دارد؟
- آیا به اندازه کافی **موجودی** برای تخصیص ۱۰ واحد وجود دارد؟

حتی اگر ورودی به ظاهر صحیح باشد، اگر موجودی کافی وجود نداشته باشد، تخصیص باید **ناموفق** باشد. این نوع **اعتبارسنجی معنایی** است—داده‌ها باید **در زمینه کسب‌وکار** منطقی باشند.

---

#### ۳. **اعتبارسنجی کاربردی (Pragmatic Validation)**

اعتبارسنجی کاربردی یک قدم فراتر می‌رود: بررسی می‌کند که آیا عمل **ممکن است یا مجاز است** با توجه به **وضعیت فعلی سیستم**.

برای مثال:
- اگر **انبار تعطیل** است، نباید سفارشی پردازش شود.
- اگر **تخفیف خاصی** منقضی شده است، اعمال آن باید شکست بخورد.

این اعتبارسنجی مربوط به این است که آیا عملیات در **این لحظه خاص** معتبر است یا خیر.

یک مثال دیگر:
شما ممکن است فرمانی مانند `allocate("SKU-001", quantity=50)` داشته باشید. اعتبارسنجی ساختاری و معنایی درست هستند، اما اگر قانون کسب‌وکار شما بگوید "مشتری نمی‌تواند بیش از ۲۰ واحد در یک بار سفارش دهد"، این فرمان در **اعتبارسنجی کاربردی** شکست می‌خورد.

---

### 🛠️ اعتبارسنجی کجا باید انجام شود؟

بهترین عمل این است که **اعتبارسنجی در اسرع وقت** در سیستم انجام شود. به این حالت **اعتبارسنجی در مرزها** گفته می‌شود.

برای مثال:
- اگر شما یک **API** می‌سازید، داده‌های درخواست را قبل از رسیدن به منطق اصلی سیستم اعتبارسنجی کنید.
- اگر با **فرم‌های کاربر** کار می‌کنید، داده‌ها را زمانی که فرم ارسال می‌شود بررسی کنید.

این کار منطق اصلی سیستم شما را **پاک و متمرکز** نگه می‌دارد و فقط روی پردازش داده‌های صحیح تمرکز می‌کند. 🧼

---

### 🧠 الگوهای رایج اعتبارسنجی

#### ۱. **اعتبارسنجی اعلامی (Declarative Validation)**

فرض کنید یک لیست از قوانین دارید مانند:
- `order_id` باید یک عدد صحیح باشد.
- `quantity` باید غیرمنفی باشد.

این قوانین را می‌توان به‌صورت **اعلامی** از قبل تعریف کرد. در پایتون، می‌توانید از چیزی مثل `pydantic` برای تعریف ورودی‌های مورد انتظار استفاده کنید:
```python
from pydantic import BaseModel, Field

class Order(BaseModel):
    order_id: int
    sku: str
    quantity: int = Field(ge=0)  # بررسی غیرمنفی بودن
```
این به‌صورت خودکار بررسی می‌کند که تمام فیلدها با قوانین اعتبارسنجی شما مطابقت دارند قبل از پردازش سفارش.

#### ۲. **قانون پستل (الگوی خواننده تحمل‌پذیر)**

این الگو می‌گوید: "**در آنچه ارسال می‌کنید محافظه‌کار باشید، اما در آنچه دریافت می‌کنید آزاد باشید.**" به عبارت دیگر، سیستم شما باید در پذیرش فیلدهای اضافی یا ناشناخته انعطاف‌پذیر باشد.

برای مثال، اگر سیستم شما فقط به `order_id` و `quantity` نیاز دارد، اما این را دریافت کند:
```json
{
  "order_id": 123,
  "quantity": 5,
  "promo_code": "DISCOUNT20"
}
```
می‌توانید فیلد اضافی (`promo_code`) را **نادیده بگیرید** به جای اینکه کل درخواست را رد کنید. این کار سیستم شما را در برابر تغییرات **انعطاف‌پذیر** می‌کند.

---

### ⚠️ مدیریت خطاهای اعتبارسنجی

هنگامی که اعتبارسنجی شکست می‌خورد، پیام‌های خطای **واضح و مفیدی** ارائه دهید. برای مثال، اگر کاربری داده‌های نامعتبر ارسال کند، چیزی شبیه به این برگردانید:
```json
{
  "error": "تعداد باید یک عدد صحیح غیرمنفی باشد."
}
```
این کار به کاربران کمک می‌کند تا متوجه شوند چه چیزی اشتباه بوده و چگونه می‌توانند آن را اصلاح کنند.


این همه ماجرا برای امروز بود! پیاده‌سازی اعتبارسنجی صحیح سیستم شما را پایدار نگه می‌دارد و از بسیاری از سردردهای آینده جلوگیری می‌کند. بیایید سیستم‌های خود را تمیز و کاربران خود را خوشحال نگه داریم! 😎💻

سوالات یا نظرات خود را در زیر به اشتراک بگذارید 👇!

--- 

This Persian version delivers the same detailed explanation of validation and its key concepts in a clear, approachable way.